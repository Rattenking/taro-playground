(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"196":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(9),n=Object(c.i)("createCameraContext")},"239":function(e,t,a){},"297":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var c=a(2),n=a(3),o=a(13),i=a(10),s=a(11),r=a(4),l=a(18),u=a.n(l),b=a(305),p=a(196),d=a(138),j=(a(239),a(137)),m=function(e){Object(i.a)(PageView,e);var t=Object(s.a)(PageView);function PageView(e){var a;return Object(c.a)(this,PageView),a=t.call(this,e),Object(r.a)(Object(o.a)(a),"ref",u.a.createRef()),Object(r.a)(Object(o.a)(a),"cameraContext",void 0),Object(r.a)(Object(o.a)(a),"toggleDevice",(function(){a.setState({"devicePosition":"back"==a.state.devicePosition?"front":"back"})})),Object(r.a)(Object(o.a)(a),"takePhoto",(function(){a.cameraContext.takePhoto({"quality":"high","success":function success(e){var t=e.tempImagePath;a.setState({"imageSrc":t})}})})),Object(r.a)(Object(o.a)(a),"startRecord",(function(){Object(b.e)({"title":"开始录像","icon":"none"}),console.log("开始录像"),a.cameraContext.startRecord()})),Object(r.a)(Object(o.a)(a),"stopRecord",(function(){Object(b.e)({"title":"停止录像","icon":"none"}),console.log("停止录像",a.cameraContext),a.cameraContext.stopRecord({"success":function success(e){console.log(e);var t=e.tempVideoPath;a.setState({"videoUrl":t})}})})),a.state={"devicePosition":"back","imageSrc":"","videoUrl":""},a}return Object(n.a)(PageView,[{"key":"componentDidMount","value":function componentDidMount(){this.cameraContext=Object(p.a)()}},{"key":"handleError","value":function handleError(){alert("您的浏览器不允许使用摄像头")}},{"key":"handleStop","value":function handleStop(){alert("摄像头被非正常终止")}},{"key":"render","value":function render(){var e=this,t=this.state,a=t.imageSrc,c=t.devicePosition,n=t.videoUrl;return Object(j.jsx)(d.B,{"className":"api-page","children":Object(j.jsxs)(d.B,{"className":"api-page__body","children":[Object(j.jsx)(d.b,{"id":"camera","className":"cammer-content","ref":this.ref,"onStop":this.handleStop,"onError":this.handleError,"devicePosition":c,"onInitDone":function onInitDone(){e.cameraContext=Object(p.a)()}}),Object(j.jsxs)(d.a,{"type":"primary","className":"api-page-btn-success","onClick":this.toggleDevice,"children":["开启","back"==c?"前置":"后置","镜头"]}),Object(j.jsx)(d.a,{"type":"primary","className":"api-page-btn-success","onClick":this.takePhoto,"children":"拍照"}),Object(j.jsx)(d.a,{"type":"primary","className":"api-page-btn-success","onClick":this.startRecord,"children":"开始录像"}),Object(j.jsx)(d.a,{"type":"primary","className":"api-page-btn-success","onClick":this.stopRecord,"children":"停止录像"}),a&&Object(j.jsx)(d.g,{"className":"preview","src":a}),n&&Object(j.jsx)(d.A,{"className":"preview","src":n,"autoplay":!0})]})})}}]),PageView}(u.a.Component)}}]);